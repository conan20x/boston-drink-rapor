<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boston Drink & Dessert · Ağustos 2025 Finansal Raporu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            color-scheme: dark;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at top right, rgba(45, 212, 191, 0.18), transparent 55%),
                        radial-gradient(circle at bottom left, rgba(14, 165, 233, 0.2), transparent 60%),
                        #020617;
            min-height: 100vh;
            color: #E2E8F0;
        }

        .glass-panel {
            backdrop-filter: blur(18px);
            background: rgba(15, 23, 42, 0.72);
            border: 1px solid rgba(148, 163, 184, 0.15);
            box-shadow: 0 25px 50px -12px rgba(15, 23, 42, 0.65);
        }

        .metric-chip {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.18), rgba(79, 70, 229, 0.06));
            border: 1px solid rgba(129, 140, 248, 0.2);
        }

        .chart-wrapper {
            position: relative;
            height: 320px;
        }

        @media (min-width: 1024px) {
            .chart-wrapper {
                height: 380px;
            }
        }

        .chart-control-btn {
            padding: 0.45rem 1.1rem;
            border-radius: 9999px;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.2s ease;
            background-color: rgba(79, 70, 229, 0.18);
            color: #A5B4FC;
        }

        .chart-control-btn.active {
            background: linear-gradient(135deg, #818cf8, #6366f1);
            color: #0f172a;
            box-shadow: 0 12px 25px -12px rgba(99, 102, 241, 0.75);
        }

        .chart-container {
            position: relative;
            width: 100%;
            margin: 0 auto;
            height: 320px;
        }

        .total-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: 700;
            font-size: 1.25rem;
            color: #E2E8F0;
            text-align: center;
        }

        .section-title {
            position: relative;
            padding-left: 1.25rem;
        }

        .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0.35rem;
            width: 0.45rem;
            height: 100%;
            border-radius: 9999px;
            background: linear-gradient(135deg, #38bdf8, #22d3ee);
        }

        .scroll-shadow {
            position: relative;
        }

        .scroll-shadow::after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            height: 1.5rem;
            pointer-events: none;
            background: linear-gradient(to top, rgba(15, 23, 42, 0.85), transparent);
        }
    </style>
</head>
<body class="antialiased">
    <div class="min-h-screen pb-16">
        <header class="max-w-6xl mx-auto px-6 pt-12 pb-8">
            <div class="glass-panel rounded-3xl p-8 lg:p-10 relative overflow-hidden">
                <div class="absolute -right-32 -top-32 w-72 h-72 bg-cyan-500/10 blur-3xl"></div>
                <div class="absolute -left-24 -bottom-24 w-72 h-72 bg-emerald-500/10 blur-3xl"></div>
                <div class="relative grid gap-10 lg:grid-cols-[1.6fr,1fr] items-start">
                    <div>
                        <div class="inline-flex items-center space-x-2 metric-chip text-sky-100 px-4 py-2 rounded-full text-[11px] font-semibold uppercase tracking-[0.35em]">
                            <span>Cadde Şubesi</span>
                            <span class="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"></span>
                        </div>
                        <h1 class="mt-6 text-4xl sm:text-5xl font-extrabold text-white leading-tight">
                            Ağustos 2025 Finansal Performans Raporu
                        </h1>
                        <p class="mt-4 text-base sm:text-lg text-slate-300 max-w-2xl">
                            Boston Drink & Dessert Cadde şubesinin brüt gelir, gider, komisyon ve stok harcamalarını tek çatı altında konsolide ettik. Bu özet, dönem sonu nakit durumunu ve operasyonel sağlığı net bir şekilde görmenizi sağlar.
                        </p>
                        <div class="mt-6 flex flex-wrap items-center gap-4 text-sm text-slate-300">
                            <div class="flex items-center space-x-2">
                                <span class="text-slate-400">Rapor Dönemi</span>
                                <span class="px-3 py-1 rounded-full bg-emerald-500/10 text-emerald-300 font-semibold" id="report-period">-</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-slate-400">Hazırlayan</span>
                                <span class="px-3 py-1 rounded-full bg-indigo-500/10 text-indigo-300 font-medium">Finans Operasyon</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-slate-400">Rapor Tarihi</span>
                                <span class="px-3 py-1 rounded-full bg-sky-500/10 text-sky-300 font-medium" id="report-date">-</span>
                            </div>
                        </div>
                    </div>
                    <div class="glass-panel rounded-2xl p-6 border border-slate-700/70">
                        <p class="text-xs uppercase tracking-[0.35em] text-slate-400">Net Dönem Kârı</p>
                        <p class="text-4xl sm:text-5xl font-bold mt-4 text-emerald-400" id="net-profit">-</p>
                        <div class="mt-6 space-y-3 text-sm">
                            <div class="flex justify-between text-slate-300">
                                <span>Brüt Gelir</span>
                                <span class="font-semibold text-slate-100" id="gross-revenue">-</span>
                            </div>
                            <div class="flex justify-between text-slate-300">
                                <span>Toplam Gider</span>
                                <span class="font-semibold text-rose-300" id="total-expense">-</span>
                            </div>
                            <div class="flex justify-between text-slate-300">
                                <span>Komisyon Gideri</span>
                                <span class="font-semibold text-sky-300" id="commission-total">-</span>
                            </div>
                        </div>
                        <div class="mt-6 rounded-xl bg-slate-900/60 p-4 border border-slate-800 text-xs text-slate-400 leading-relaxed">
                            <p>Net kâr marjı <span class="text-emerald-300 font-semibold" id="profit-margin">-</span> seviyesinde. Online platform payı ve nakit akışı dengesi, şubenin operasyonel dayanıklılığını destekliyor.</p>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="max-w-6xl mx-auto px-6 space-y-12">
            <section>
                <h2 class="section-title text-2xl font-semibold text-white mb-6">Öne Çıkan Göstergeler</h2>
                <div class="grid gap-6 sm:grid-cols-2 xl:grid-cols-4">
                    <div class="glass-panel rounded-2xl p-6 border border-slate-800">
                        <p class="text-xs uppercase tracking-wide text-slate-400">Online Brüt Gelir Payı</p>
                        <p class="mt-4 text-3xl font-semibold text-white" id="online-share">-</p>
                        <p class="mt-2 text-xs text-slate-400">Yemeksepeti, Getir ve Trendyol kanal toplamı</p>
                    </div>
                    <div class="glass-panel rounded-2xl p-6 border border-slate-800">
                        <p class="text-xs uppercase tracking-wide text-slate-400">Brüt → Net Dönüşüm</p>
                        <p class="mt-4 text-3xl font-semibold text-white" id="gross-to-net">-</p>
                        <p class="mt-2 text-xs text-slate-400">Komisyon sonrası bankaya yatan gelir oranı</p>
                    </div>
                    <div class="glass-panel rounded-2xl p-6 border border-slate-800">
                        <p class="text-xs uppercase tracking-wide text-slate-400">Banka Net Akışı</p>
                        <p class="mt-4 text-3xl font-semibold text-emerald-300" id="bank-net">-</p>
                        <p class="mt-2 text-xs text-slate-400">Banka gelirleri - banka giderleri</p>
                    </div>
                    <div class="glass-panel rounded-2xl p-6 border border-slate-800">
                        <p class="text-xs uppercase tracking-wide text-slate-400">Kasa Net Akışı</p>
                        <p class="mt-4 text-3xl font-semibold text-emerald-300" id="cash-net">-</p>
                        <p class="mt-2 text-xs text-slate-400">Nakit giriş - nakit çıkış</p>
                    </div>
                </div>
            </section>

            <section class="grid gap-6 lg:grid-cols-5">
                <div class="glass-panel rounded-2xl p-6 border border-slate-800 lg:col-span-3">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h2 class="text-xl font-semibold text-white">Brüt Gelir Kanalları</h2>
                            <p class="text-sm text-slate-400">Toplam brüt gelirin dağılımı</p>
                        </div>
                        <div class="flex gap-2 chart-controls" data-chart-id="grossIncomeChart">
                            <button class="chart-control-btn active" data-type="doughnut">Dairesel</button>
                            <button class="chart-control-btn" data-type="bar">Bar</button>
                        </div>
                    </div>
                    <div class="chart-container mb-6">
                        <canvas id="grossIncomeChart"></canvas>
                        <div class="total-label" id="grossIncomeTotal"></div>
                    </div>
                    <div id="gross-income-list" class="grid gap-3 sm:grid-cols-2"></div>
                </div>
                <div class="glass-panel rounded-2xl p-6 border border-slate-800 lg:col-span-2">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h2 class="text-xl font-semibold text-white">Net Gelir Kanalları</h2>
                            <p class="text-sm text-slate-400">Komisyon sonrası banka + kasa</p>
                        </div>
                        <div class="flex gap-2 chart-controls" data-chart-id="netIncomeChart">
                            <button class="chart-control-btn active" data-type="doughnut">Dairesel</button>
                            <button class="chart-control-btn" data-type="bar">Bar</button>
                        </div>
                    </div>
                    <div class="chart-container mb-6">
                        <canvas id="netIncomeChart"></canvas>
                        <div class="total-label" id="netIncomeTotal"></div>
                    </div>
                    <div id="net-income-list" class="grid gap-3"></div>
                </div>
            </section>

            <section class="grid gap-6 lg:grid-cols-5">
                <div class="glass-panel rounded-2xl p-6 border border-slate-800 lg:col-span-3">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h2 class="text-xl font-semibold text-white">Çikolata Kullanımı</h2>
                            <p class="text-sm text-slate-400">KG bazında tüketim ve maliyet</p>
                        </div>
                        <div class="flex gap-2 chart-controls" data-chart-id="chocolateChart">
                            <button class="chart-control-btn active" data-type="doughnut">Dairesel</button>
                            <button class="chart-control-btn" data-type="bar">Bar</button>
                        </div>
                    </div>
                    <div class="chart-container mb-6">
                        <canvas id="chocolateChart"></canvas>
                        <div class="total-label" id="chocolateTotal"></div>
                    </div>
                    <div id="chocolate-list" class="grid gap-3 sm:grid-cols-2"></div>
                </div>
                <div class="glass-panel rounded-2xl p-6 border border-slate-800 lg:col-span-2">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h2 class="text-xl font-semibold text-white">Personel Yemek Kartları</h2>
                            <p class="text-sm text-slate-400">Toplam 26.061,54 ₺ yükleme</p>
                        </div>
                        <div class="flex gap-2 chart-controls" data-chart-id="foodCardChart">
                            <button class="chart-control-btn active" data-type="doughnut">Dairesel</button>
                            <button class="chart-control-btn" data-type="bar">Bar</button>
                        </div>
                    </div>
                    <div class="chart-container mb-6">
                        <canvas id="foodCardChart"></canvas>
                        <div class="total-label" id="foodCardTotal"></div>
                    </div>
                    <div id="food-card-list" class="grid gap-3 max-h-64 overflow-y-auto pr-1 scroll-shadow"></div>
                </div>
            </section>

            <section class="glass-panel rounded-2xl p-6 border border-slate-800">
                <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-10">
                    <div class="lg:w-2/5">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h2 class="text-xl font-semibold text-white">Giderlerin Dağılımı</h2>
                                <p class="text-sm text-slate-400">Toplam 1.261.325,82 ₺ gider</p>
                            </div>
                            <div class="flex gap-2 chart-controls" data-chart-id="expenseChart">
                                <button class="chart-control-btn active" data-type="doughnut">Dairesel</button>
                                <button class="chart-control-btn" data-type="bar">Bar</button>
                            </div>
                        </div>
                        <div class="chart-container mb-6">
                            <canvas id="expenseChart"></canvas>
                            <div class="total-label" id="expenseTotal"></div>
                        </div>
                    </div>
                    <div class="lg:w-3/5">
                        <h3 class="text-sm uppercase tracking-[0.2em] text-slate-400 mb-4">Detaylı Gider Listesi</h3>
                        <div id="expense-list" class="grid gap-3 max-h-72 overflow-y-auto pr-1 scroll-shadow"></div>
                    </div>
                </div>
            </section>

            <section class="glass-panel rounded-2xl p-6 border border-slate-800">
                <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-10">
                    <div class="lg:w-1/2">
                        <h2 class="text-xl font-semibold text-white mb-2">Genel Merkez Sevkiyatları</h2>
                        <p class="text-sm text-slate-400 mb-6">Ürün bazında toplam 341.427,86 ₺ stok girişi</p>
                        <div id="shipment-list" class="space-y-3 max-h-80 overflow-y-auto pr-1 scroll-shadow"></div>
                        <div class="mt-6 pt-4 border-t border-slate-700 text-right text-sm text-slate-300">
                            <span class="font-medium">Toplam:</span>
                            <span class="text-lg font-semibold text-white" id="shipment-total">-</span>
                        </div>
                    </div>
                    <div class="lg:w-1/2 space-y-8">
                        <div>
                            <h2 class="text-xl font-semibold text-white mb-2">Online Platform Komisyonları</h2>
                            <p class="text-sm text-slate-400 mb-4">Komisyon toplamı 255.903,20 ₺</p>
                            <div id="online-commission-list" class="space-y-4"></div>
                            <div class="mt-6 p-4 rounded-2xl bg-sky-500/10 border border-sky-500/30">
                                <p class="text-sm text-slate-300" id="commission-summary"></p>
                            </div>
                        </div>
                        <div>
                            <h2 class="text-xl font-semibold text-white mb-2">Dönem Sonu Nakit Görünümü</h2>
                            <div class="grid gap-3" id="financial-status-list"></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="max-w-6xl mx-auto px-6 mt-16 text-center text-sm text-slate-500">
            <p>Bu rapor, Boston Drink & Dessert Cadde şubesinin sağladığı finansal verilere dayanır ve bilgi amaçlı hazırlanmıştır.</p>
            <p>© 2025 Boston Drink & Dessert</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const reportData = {
                meta: {
                    period: '01.08.2025 - 04.09.2025',
                    reportDate: '6 Eylül 2025'
                },
                kpi: {
                    grossRevenue: 1704018.00,
                    totalExpenses: 1347540.82,
                    netProfit: 109550.17,
                    bankIncome: 1334915.99,
                    bankExpense: 1258695.82,
                    cashIncome: 122175.00,
                    cashExpense: 88845.00
                },
                income: {
                    gross: {
                        labels: ['Kredi Kartı', 'Yemeksepeti Online', 'Getir Online', 'Trendyol Online', 'Nakit'],
                        values: [728958.00, 547510.00, 162820.00, 142555.00, 122175.00]
                    },
                    net: {
                        labels: ['Kredi Kartı', 'Yemeksepeti Online', 'Getir Online', 'Trendyol Online', 'Nakit'],
                        values: [729092.33, 396173.05, 104019.71, 96789.04, 122175.00]
                    }
                },
                chocolate: [
                    { name: 'Sütlü Çikolata', kg: 360, pricePerKg: 690 },
                    { name: 'Bitter Çikolata', kg: 40, pricePerKg: 730 },
                    { name: 'Beyaz Çikolata', kg: 60, pricePerKg: 690 },
                    { name: 'Ruby Çikolata', kg: 12.5, pricePerKg: 835 },
                    { name: 'Gold Çikolata', kg: 15, pricePerKg: 950 }
                ],
                expenses: [
                    { label: 'Genel Merkeze Ödeme', value: 426283.57 },
                    { label: 'Personel Maaşları (Banka)', value: 116000.00 },
                    { label: 'Personel Maaşları (Nakit)', value: 76115.00 },
                    { label: 'Stajyer Maaşı', value: 30050.00 },
                    { label: 'Kredi Kartı Borç Ödemesi', value: 175177.17 },
                    { label: 'Dükkan Kirası', value: 92000.00 },
                    { label: 'Ev Kirası', value: 25000.00 },
                    { label: 'Manav Ödemesi', value: 100280.00 },
                    { label: 'Elektrik Faturası', value: 71310.00 },
                    { label: 'Geçici Vergi Ödemesi', value: 65946.00 },
                    { label: 'Yemek Kartları Ödemesi', value: 20001.54 },
                    { label: 'İçim Süt Ödemesi', value: 24697.62 },
                    { label: 'Nakit Diğer Ödemeler', value: 12730.00 },
                    { label: 'Arıtma Değişim Ücreti', value: 8400.00 },
                    { label: 'Su Faturası', value: 5126.00 },
                    { label: 'Cam Temizlik Ödeme', value: 4800.00 },
                    { label: 'Vantilatör Lamba Ödemesi', value: 2000.00 },
                    { label: 'Filtre Bakım Ödemesi', value: 1500.00 },
                    { label: 'İlaçlama Ödeme', value: 1500.00 },
                    { label: 'Yazılım Bakım Ücreti', value: 798.00 },
                    { label: 'Telefon Faturası', value: 781.50 },
                    { label: 'İnternet Faturası', value: 420.00 },
                    { label: 'Havale Ücreti', value: 409.42 }
                ],
                foodCards: [
                    { name: 'Merve', value: 3030.00 },
                    { name: 'Hacer', value: 3030.00 },
                    { name: 'Enise', value: 3000.00 },
                    { name: 'Emre Albay', value: 2176.00 },
                    { name: 'Furkan', value: 2170.00 },
                    { name: 'Nesibe', value: 2042.54 },
                    { name: 'Ezel', value: 1900.00 },
                    { name: 'Alp', value: 1820.00 },
                    { name: 'Yeşim', value: 1792.00 },
                    { name: 'Berkay', value: 1590.00 },
                    { name: 'Emre Yeşilçayır', value: 1465.00 },
                    { name: 'Taha', value: 1235.00 },
                    { name: 'İbrahim', value: 441.00 },
                    { name: 'Aslı', value: 370.00 }
                ],
                shipments: [
                    { name: 'CALLEBAUT SÜTLÜ ÇİKOLATA (10 KG)', quantity: '300 KG', price: 209070.00 },
                    { name: 'CALLEBAUT BEYAZ ÇİKOLATA (10 KG)', quantity: '60 KG', price: 71306.00 },
                    { name: 'CALLEBAUT KREP KIRIĞI (10 KG)', quantity: '20 KG', price: 13332.00 },
                    { name: 'CALLEBAUT GOLD KARAMEL ÇİKOLATA (10KG)', quantity: '10 KG', price: 9595.00 },
                    { name: 'CALLEBAUT RUBY ÇİKOLATA (10 KG)', quantity: '10 KG', price: 8433.50 },
                    { name: 'BOSTON BASKILI MİNİ KAP', quantity: '2 KOLİ', price: 4320.00 },
                    { name: 'BOSTON CRUST PAKET ALL IN ONE KUTU 1/1', quantity: '1 PAKET', price: 3600.00 },
                    { name: 'BOSTON CRUST PAKET ALL IN ONE KUTU 1/2', quantity: '1 PAKET', price: 2760.00 },
                    { name: 'BOSTON BASKILI ŞEFFAF BARDAK 12 OZ', quantity: '1 KOLİ', price: 3840.00 },
                    { name: 'BOSTON BASKILI PEÇETE', quantity: '2 ADET', price: 2040.00 },
                    { name: 'BOSTON CRUST MIX WAFFLE KUTU', quantity: '1 PAKET', price: 2100.00 },
                    { name: 'BOSTON BASKILI TAM KAP', quantity: '1 KOLİ', price: 1710.00 },
                    { name: 'BOSTON BASKILI KRAFT SAPLI ÇANTA', quantity: '1 KOLİ', price: 1500.00 },
                    { name: 'BASKILI KRAFT KESE KAĞIDI KG', quantity: '1 KOLİ', price: 3240.00 },
                    { name: 'TORKU TAM BUĞDAYLI BİSKÜVİ TOZU', quantity: '2 KOLİ', price: 1575.60 },
                    { name: 'BOSTON BASKILI DEMLİK POŞET ÇAY', quantity: '1 KOLİ', price: 1818.00 },
                    { name: 'DVG BAR SOS KARAMEL (2KG)', quantity: '1 ADET', price: 1187.76 }
                ],
                onlineCommissions: [
                    { name: 'Yemeksepeti', gross: 547510.00, net: 396173.05 },
                    { name: 'Getir', gross: 162820.00, net: 104019.71 },
                    { name: 'Trendyol', gross: 142555.00, net: 96789.04 }
                ]
            };

            const formatCurrency = (value) => new Intl.NumberFormat('tr-TR', { style: 'currency', currency: 'TRY' }).format(value);
            const formatPercent = (value, decimals = 1) => `${(value * 100).toFixed(decimals)}%`;

            const setText = (id, value) => {
                const el = document.getElementById(id);
                if (el) el.textContent = value;
            };

            const totalGross = reportData.income.gross.values.reduce((sum, val) => sum + val, 0);
            const totalNetIncome = reportData.income.net.values.reduce((sum, val) => sum + val, 0);
            const totalOnlineGross = reportData.income.gross.values.slice(1, 4).reduce((sum, val) => sum + val, 0);
            const totalOnlineNet = reportData.income.net.values.slice(1, 4).reduce((sum, val) => sum + val, 0);
            const totalCommission = totalOnlineGross - totalOnlineNet;
            const bankNet = reportData.kpi.bankIncome - reportData.kpi.bankExpense;
            const cashNet = reportData.kpi.cashIncome - reportData.kpi.cashExpense;

            setText('report-period', reportData.meta.period);
            setText('report-date', reportData.meta.reportDate);
            setText('gross-revenue', formatCurrency(reportData.kpi.grossRevenue));
            setText('total-expense', formatCurrency(reportData.kpi.totalExpenses));
            setText('net-profit', formatCurrency(reportData.kpi.netProfit));
            setText('commission-total', formatCurrency(totalCommission));
            setText('profit-margin', formatPercent(reportData.kpi.netProfit / reportData.kpi.grossRevenue, 2));
            setText('online-share', formatPercent(totalOnlineGross / totalGross, 1));
            setText('gross-to-net', formatPercent(totalNetIncome / totalGross, 1));
            setText('bank-net', formatCurrency(bankNet));
            setText('cash-net', formatCurrency(cashNet));

            setText('commission-summary', `Online platformlardan elde edilen ${formatCurrency(totalOnlineGross)} brüt cironun bankaya yansıyan net tutarı ${formatCurrency(totalOnlineNet)} oldu. Toplam ${formatCurrency(totalCommission)} komisyon ödendi.`);

            const grossList = document.getElementById('gross-income-list');
            reportData.income.gross.labels.forEach((label, index) => {
                const card = document.createElement('div');
                card.className = 'flex items-center justify-between rounded-xl bg-emerald-500/10 border border-emerald-500/20 px-4 py-3 text-sm';
                card.innerHTML = `<span class="font-medium">${label}</span><span class="font-semibold">${formatCurrency(reportData.income.gross.values[index])}</span>`;
                grossList.appendChild(card);
            });

            const netList = document.getElementById('net-income-list');
            reportData.income.net.labels.forEach((label, index) => {
                const card = document.createElement('div');
                card.className = 'flex items-center justify-between rounded-xl bg-sky-500/10 border border-sky-500/20 px-4 py-3 text-sm';
                card.innerHTML = `<span class="font-medium">${label}</span><span class="font-semibold">${formatCurrency(reportData.income.net.values[index])}</span>`;
                netList.appendChild(card);
            });

            const chocolateList = document.getElementById('chocolate-list');
            reportData.chocolate
                .map(item => ({ ...item, total: item.kg * item.pricePerKg }))
                .sort((a, b) => b.total - a.total)
                .forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'rounded-xl bg-amber-500/10 border border-amber-500/25 px-4 py-3 text-sm flex items-center justify-between';
                    card.innerHTML = `<div><p class="font-semibold text-amber-200">${item.name}</p><p class="text-slate-400 text-xs">${item.kg} KG · ${formatCurrency(item.pricePerKg)}/KG</p></div><span class="font-semibold">${formatCurrency(item.total)}</span>`;
                    chocolateList.appendChild(card);
                });

            const foodCardList = document.getElementById('food-card-list');
            reportData.foodCards
                .sort((a, b) => b.value - a.value)
                .forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'rounded-xl bg-indigo-500/10 border border-indigo-500/20 px-4 py-3 text-sm flex items-center justify-between';
                    card.innerHTML = `<span class="font-medium">${item.name}</span><span class="font-semibold">${formatCurrency(item.value)}</span>`;
                    foodCardList.appendChild(card);
                });
            setText('foodCardTotal', formatCurrency(reportData.foodCards.reduce((sum, item) => sum + item.value, 0)));

            const expenseList = document.getElementById('expense-list');
            reportData.expenses.forEach(item => {
                const row = document.createElement('div');
                row.className = 'flex items-center justify-between rounded-xl bg-rose-500/10 border border-rose-500/20 px-4 py-3 text-sm';
                row.innerHTML = `<span>${item.label}</span><span class="font-semibold text-rose-200">-${formatCurrency(item.value)}</span>`;
                expenseList.appendChild(row);
            });

            const shipmentList = document.getElementById('shipment-list');
            let shipmentTotal = 0;
            [...reportData.shipments]
                .sort((a, b) => b.price - a.price)
                .forEach(item => {
                    shipmentTotal += item.price;
                    const row = document.createElement('div');
                    row.className = 'rounded-xl bg-slate-900/60 border border-slate-700 px-4 py-3';
                    row.innerHTML = `<div class="flex items-center justify-between text-sm"><div><p class="font-semibold text-slate-100">${item.name}</p><p class="text-slate-400 text-xs">${item.quantity}</p></div><span class="font-semibold">${formatCurrency(item.price)}</span></div>`;
                    shipmentList.appendChild(row);
                });
            setText('shipment-total', formatCurrency(shipmentTotal));

            const onlineCommissionList = document.getElementById('online-commission-list');
            reportData.onlineCommissions.forEach(item => {
                const commission = item.gross - item.net;
                const ratio = commission / item.gross;
                const block = document.createElement('div');
                block.innerHTML = `
                    <div class="space-y-2">
                        <div class="flex items-center justify-between text-sm">
                            <span class="font-semibold">${item.name}</span>
                            <span class="text-rose-200 font-semibold">-${formatCurrency(commission)} (${formatPercent(ratio, 1)})</span>
                        </div>
                        <div class="w-full h-2 rounded-full bg-slate-800">
                            <div class="h-2 rounded-full bg-rose-400" style="width: ${(ratio * 100).toFixed(1)}%"></div>
                        </div>
                        <div class="flex items-center justify-between text-xs text-slate-400">
                            <span>Brüt: ${formatCurrency(item.gross)}</span>
                            <span>Net: ${formatCurrency(item.net)}</span>
                        </div>
                    </div>`;
                onlineCommissionList.appendChild(block);
            });

            const financialStatusList = document.getElementById('financial-status-list');
            const financialRows = [
                { label: 'Toplam Banka Gelirleri', value: reportData.kpi.bankIncome, tone: 'positive' },
                { label: 'Toplam Banka Giderleri', value: -reportData.kpi.bankExpense, tone: 'negative' },
                { label: 'Banka Net Akışı', value: bankNet, tone: 'highlight' },
                { label: 'Nakit Gelir (Kasa)', value: reportData.kpi.cashIncome, tone: 'positive' },
                { label: 'Nakit Gider (Kasa)', value: -reportData.kpi.cashExpense, tone: 'negative' },
                { label: 'Kasa Net Akışı', value: cashNet, tone: 'highlight' },
                { label: 'Toplam Varlık', value: bankNet + cashNet, tone: 'primary' }
            ];

            const toneClasses = {
                positive: 'bg-emerald-500/10 border border-emerald-500/25 text-emerald-200',
                negative: 'bg-rose-500/10 border border-rose-500/25 text-rose-200',
                highlight: 'bg-sky-500/10 border border-sky-500/25 text-sky-200',
                primary: 'bg-amber-500/15 border border-amber-500/30 text-amber-100'
            };

            financialRows.forEach(row => {
                const card = document.createElement('div');
                card.className = `rounded-xl px-4 py-3 text-sm flex items-center justify-between ${toneClasses[row.tone] || 'bg-slate-800/60 border border-slate-700 text-slate-100'}`;
                card.innerHTML = `<span>${row.label}</span><span class="font-semibold">${formatCurrency(row.value)}</span>`;
                financialStatusList.appendChild(card);
            });

            const chartStates = {
                grossIncomeChart: 'doughnut',
                netIncomeChart: 'doughnut',
                chocolateChart: 'doughnut',
                foodCardChart: 'doughnut',
                expenseChart: 'doughnut'
            };

            const charts = {};

            const createOrUpdateChart = (canvasId, type, labels, data, colors, totalElementId) => {
                const ctx = document.getElementById(canvasId).getContext('2d');
                const totalElement = document.getElementById(totalElementId);

                if (charts[canvasId]) {
                    charts[canvasId].destroy();
                }

                if (totalElement) {
                    const total = data.reduce((sum, value) => sum + value, 0);
                    totalElement.textContent = formatCurrency(total);
                    totalElement.style.display = type === 'doughnut' || type === 'pie' ? 'block' : 'none';
                }

                const options = {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: type !== 'bar',
                            position: 'bottom',
                            labels: {
                                color: '#E2E8F0',
                                usePointStyle: true,
                                padding: 18
                            }
                        },
                        tooltip: {
                            backgroundColor: '#0f172a',
                            borderColor: 'rgba(148,163,184,0.25)',
                            borderWidth: 1,
                            titleColor: '#e2e8f0',
                            bodyColor: '#cbd5f5',
                            callbacks: {
                                label: (context) => `${context.label}: ${formatCurrency(context.parsed.y ?? context.raw)}`
                            }
                        }
                    },
                    scales: type === 'bar' ? {
                        x: {
                            grid: { color: 'rgba(148,163,184,0.12)' },
                            ticks: { color: '#94a3b8' }
                        },
                        y: {
                            grid: { color: 'rgba(148,163,184,0.12)' },
                            ticks: {
                                color: '#94a3b8',
                                callback: (value) => `${value / 1000}K`
                            }
                        }
                    } : undefined
                };

                if (type === 'doughnut') {
                    options.cutout = '62%';
                }

                charts[canvasId] = new Chart(ctx, {
                    type,
                    data: {
                        labels,
                        datasets: [{
                            data,
                            backgroundColor: colors,
                            borderWidth: type === 'bar' ? 0 : 3,
                            borderColor: type === 'bar' ? 'transparent' : '#0f172a'
                        }]
                    },
                    options
                });
            };

            const palette = ['#38bdf8', '#22d3ee', '#818cf8', '#fbbf24', '#f87171', '#34d399', '#a855f7', '#ec4899'];

            createOrUpdateChart(
                'grossIncomeChart',
                chartStates.grossIncomeChart,
                reportData.income.gross.labels,
                reportData.income.gross.values,
                ['#38bdf8', '#22d3ee', '#fbbf24', '#f87171', '#34d399'],
                'grossIncomeTotal'
            );

            createOrUpdateChart(
                'netIncomeChart',
                chartStates.netIncomeChart,
                reportData.income.net.labels,
                reportData.income.net.values,
                ['#38bdf8', '#22d3ee', '#fbbf24', '#f87171', '#34d399'],
                'netIncomeTotal'
            );

            const chocolateTotals = reportData.chocolate.map(item => item.kg * item.pricePerKg);
            createOrUpdateChart(
                'chocolateChart',
                chartStates.chocolateChart,
                reportData.chocolate.map(item => item.name),
                chocolateTotals,
                ['#f59e0b', '#e2e8f0', '#fde68a', '#f472b6', '#facc15'],
                'chocolateTotal'
            );

            createOrUpdateChart(
                'foodCardChart',
                chartStates.foodCardChart,
                reportData.foodCards.map(item => item.name),
                reportData.foodCards.map(item => item.value),
                palette,
                'foodCardTotal'
            );

            const expenseCategories = reportData.expenses.reduce((acc, item) => {
                let key = 'Diğer Giderler';
                if (item.label.includes('Personel')) key = 'Personel Giderleri';
                else if (item.label.includes('Kira')) key = 'Kira & Sabit';
                else if (item.label.includes('Vergi') || item.label.includes('Faturası')) key = 'Vergi & Faturalar';
                else if (item.label.includes('Genel Merkez')) key = 'Genel Merkez Ödeme';
                else if (item.label.includes('Kredi Kartı')) key = 'Finansal Giderler';
                else if (item.label.includes('Manav') || item.label.includes('İçim Süt')) key = 'Hammadde & Tedarik';
                else if (item.label.includes('Yemek Kartları')) key = 'Yan Haklar';
                else if (item.label.includes('Bakım') || item.label.includes('Temizlik') || item.label.includes('İlaçlama') || item.label.includes('Arıtma')) key = 'Bakım & Operasyon';
                acc[key] = (acc[key] || 0) + item.value;
                return acc;
            }, {});

            createOrUpdateChart(
                'expenseChart',
                chartStates.expenseChart,
                Object.keys(expenseCategories),
                Object.values(expenseCategories),
                ['#f87171', '#fb7185', '#fbbf24', '#38bdf8', '#34d399', '#22d3ee', '#a855f7', '#f472b6'],
                'expenseTotal'
            );

            document.querySelectorAll('.chart-controls').forEach(control => {
                control.addEventListener('click', (event) => {
                    if (!event.target.matches('.chart-control-btn')) return;

                    const chartId = control.dataset.chartId;
                    const newType = event.target.dataset.type;

                    if (chartStates[chartId] === newType) return;
                    chartStates[chartId] = newType;

                    control.querySelectorAll('.chart-control-btn').forEach(btn => btn.classList.remove('active'));
                    event.target.classList.add('active');

                    switch (chartId) {
                        case 'grossIncomeChart':
                            createOrUpdateChart(chartId, newType, reportData.income.gross.labels, reportData.income.gross.values, ['#38bdf8', '#22d3ee', '#fbbf24', '#f87171', '#34d399'], 'grossIncomeTotal');
                            break;
                        case 'netIncomeChart':
                            createOrUpdateChart(chartId, newType, reportData.income.net.labels, reportData.income.net.values, ['#38bdf8', '#22d3ee', '#fbbf24', '#f87171', '#34d399'], 'netIncomeTotal');
                            break;
                        case 'chocolateChart':
                            createOrUpdateChart(chartId, newType, reportData.chocolate.map(item => item.name), chocolateTotals, ['#f59e0b', '#e2e8f0', '#fde68a', '#f472b6', '#facc15'], 'chocolateTotal');
                            break;
                        case 'foodCardChart':
                            createOrUpdateChart(chartId, newType, reportData.foodCards.map(item => item.name), reportData.foodCards.map(item => item.value), palette, 'foodCardTotal');
                            break;
                        case 'expenseChart':
                            createOrUpdateChart(chartId, newType, Object.keys(expenseCategories), Object.values(expenseCategories), ['#f87171', '#fb7185', '#fbbf24', '#38bdf8', '#34d399', '#22d3ee', '#a855f7', '#f472b6'], 'expenseTotal');
                            break;
                        default:
                            break;
                    }
                });
            });
        });
    </script>
</body>
</html>
